{"version":3,"sources":["../../src/client/KombatRenderer.js"],"names":["ctx","canvas","game","C_WIDTH","C_HEIGHT","KombatRenderer","gameEngine","clientEngine","document","createElement","setAttribute","width","height","body","appendChild","zoom","getContext","lineWidth","shadowOffsetX","shadowOffsetY","shadowBlur","offset","TwoVector","playerKombat","c","getElementById","x","position","y","t","dt","resetRender","world","queryObject","playerId","instanceType","Kombat","setOffset","queryObjects","Blood","forEach","obj","drawBlood","forEachObject","id","drawKombat","Bullet","drawBullet","Granade","drawGranade","Wall","drawWall","Explosion2","drawExplosion","drawHUD","restore","clearRect","save","translate","scale","shadowColor","fillStyle","i","ammo_loaded","fillRect","strokeStyle","throw_power","beginPath","rect","closePath","stroke","health","max_health","edge","Math","SQRT2","center","getCenter","radius","getCircumscribedRadiusLength","color","drawCircle","font","fillText","name","length","moveTo","lineTo","cos","direction","sin","arc","PI","throwing_granade","drawBox","splatter","sp","fill","r","w","h","Renderer"],"mappings":"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","sourcesContent":["import { Renderer, TwoVector } from 'lance-gg';\nimport Kombat from '../common/Kombat';\nimport Bullet from '../common/Bullet';\nimport Granade from '../common/Granade';\nimport Wall from '../common/Wall';\nimport Blood from '../common/Blood';\nimport Explosion2 from '../common/Explosion2';\n\nlet ctx = null;\nlet canvas = null;\nlet game = null;\nconst C_WIDTH = 800;\nconst C_HEIGHT = 600;\n\nexport default class KombatRenderer extends Renderer {\n\n    constructor(gameEngine, clientEngine) {\n        super(gameEngine, clientEngine);\n        game = gameEngine;\n        canvas = document.createElement('canvas');\n        canvas.setAttribute('id', 'kc');\n        canvas.width = C_WIDTH;\n        canvas.height = C_HEIGHT;\n        document.body.appendChild(canvas);\n        clientEngine.zoom = 10;\n        ctx = canvas.getContext('2d');\n        ctx.lineWidth = 3 / clientEngine.zoom;\n        ctx.shadowOffsetX = 0;\n        ctx.shadowOffsetY = 0;\n        ctx.shadowBlur = 5; \n        this.offset = new TwoVector(0, 0);\n    }\n\n    setOffset(playerKombat){\n        let c = document.getElementById('kc');\n        this.offset.x = (C_WIDTH/2)/this.clientEngine.zoom - playerKombat.position.x - (playerKombat.width / 2);\n        this.offset.y = (C_HEIGHT/2)/this.clientEngine.zoom - playerKombat.position.y - (playerKombat.height / 2);\n    }\n\n    draw(t, dt) {\n        super.draw(t, dt);\n        this.resetRender();\n        let playerKombat = this.gameEngine.world.queryObject({ playerId: this.gameEngine.playerId,  instanceType: Kombat });\n        if(playerKombat){\n            this.setOffset(playerKombat);\n            //draw blood stains first // layer 0\n            game.world.queryObjects({instanceType: Blood}).forEach(obj => {\n                this.drawBlood(obj);\n            });\n            game.world.forEachObject((id, obj) => {\n                if (obj instanceof Kombat) this.drawKombat(obj);\n                else if (obj instanceof Bullet) this.drawBullet(obj);\n                else if (obj instanceof Granade) this.drawGranade(obj);\n                else if (obj instanceof Wall) this.drawWall(obj);\n                else if (obj instanceof Explosion2) this.drawExplosion(obj);\n            });\n            this.drawHUD(playerKombat);\n        }\n\n        ctx.restore();\n    }\n\n    resetRender(){\n        ctx.clearRect(0, 0, C_WIDTH, C_HEIGHT);\n        ctx.save();\n        ctx.translate(0, 0);\n        ctx.scale(this.clientEngine.zoom, this.clientEngine.zoom);  // Zoom in and flip y axis\n    }\n\n    drawHUD(obj){\n        //Bullets\n        ctx.shadowColor = 'white';\n        ctx.fillStyle = \"orange\";\n        for(let i=0; i < obj.ammo_loaded; i++){\n            ctx.fillRect(\n                (125 + i*6)/ this.clientEngine.zoom, \n                543/ this.clientEngine.zoom, \n                2 / this.clientEngine.zoom, \n                2 / this.clientEngine.zoom\n            );\n            ctx.fillRect(\n                (124 + i*6)/ this.clientEngine.zoom, \n                545/ this.clientEngine.zoom, \n                4 / this.clientEngine.zoom, \n                20 / this.clientEngine.zoom\n            );\n        }\n        //Throw Power\n        ctx.strokeStyle = \"white\";\n        ctx.fillStyle = \"rgba(255, 255, 255, .9)\";\n        ctx.fillRect(\n            20/ this.clientEngine.zoom, \n            544/ this.clientEngine.zoom, \n            obj.throw_power  * 100 / this.clientEngine.zoom, \n            18 / this.clientEngine.zoom\n        );\n        ctx.beginPath();\n        ctx.rect(\n            20/ this.clientEngine.zoom, \n            545/ this.clientEngine.zoom, \n            100 / this.clientEngine.zoom, \n            18/ this.clientEngine.zoom\n        );\n        ctx.closePath();\n        ctx.stroke();\n        //Life\n        ctx.strokeStyle = \"white\";\n        ctx.fillStyle = \"rgba(255, 0, 0, .5)\";\n        ctx.fillRect(20/ this.clientEngine.zoom, 570/ this.clientEngine.zoom, obj.health * ( 760 / obj.max_health)/ this.clientEngine.zoom, 18/ this.clientEngine.zoom);\n        ctx.beginPath();\n        ctx.rect(20/ this.clientEngine.zoom, 570/ this.clientEngine.zoom, 760 / this.clientEngine.zoom, 16/ this.clientEngine.zoom);\n        ctx.closePath();\n        ctx.stroke();\n    }\n\n    getCenter(obj){\n\n        return new TwoVector(\n            obj.position.x + this.offset.x + obj.width/2,\n            obj.position.y + this.offset.y + obj.height/2\n        )\n    }\n\n    getCircumscribedRadiusLength(edge){\n        return (edge * Math.SQRT2) / 2;\n    }\n\n    drawKombat(obj) {\n     \n        let center = this.getCenter(obj);\n        let radius = this.getCircumscribedRadiusLength(obj.width);\n        let color = obj.playerId === this.gameEngine.playerId ? \"dodgerblue\" : \"crimson\";\n        ctx.shadowColor = color;\n        ctx.strokeStyle = color;\n        //base circle\n        this.drawCircle(center.x, center.y, radius);\n        //kombat name\n        ctx.fillStyle = \"white\";\n        ctx.font = '1px Arial';\n        ctx.fillText(obj.name, center.x - (obj.name.length/4), center.y - 2);\n        //directional line\n        ctx.moveTo(center.x,center.y);\n        ctx.lineTo(center.x + radius * Math.cos(obj.direction), center.y + radius * Math.sin(obj.direction));\n        ctx.stroke();\n        //ammo reloading circle\n        if(obj.ammo_loaded === -1){\n            ctx.beginPath();\n            ctx.arc(center.x, center.y, radius+ radius/2, .1, Math.PI/2 - .1);\n            ctx.stroke();\n            ctx.beginPath();\n            ctx.arc(center.x, center.y, radius+ radius/2,  Math.PI+.1, Math.PI + Math.PI/2 -.1);\n            ctx.stroke();\n        }\n\n        if(obj.throwing_granade === 1){\n            ctx.strokeStyle = \"white\";\n            ctx.shadowColor = \"white\";\n            ctx.beginPath();\n            ctx.arc(center.x, center.y, radius+ radius/2 + .1, Math.PI/2, Math.PI - .1);\n            ctx.stroke();\n            ctx.beginPath();\n            ctx.arc(center.x, center.y, radius+ radius/2,  Math.PI + Math.PI/2 +.1, 2*Math.PI - .1);\n            ctx.stroke();\n        }\n    }\n\n    drawBullet(obj){\n        ctx.shadowColor = \"yellow\";\n        ctx.strokeStyle = \"yellow\";\n        let center = this.getCenter(obj);\n        let radius = this.getCircumscribedRadiusLength(obj.width);\n        ctx.beginPath();\n        ctx.arc(center.x, center.y, .5, 0, 2*Math.PI);\n        ctx.stroke();\n        ctx.closePath();\n    }\n\n    drawGranade(obj){\n        ctx.shadowColor = \"lime\";\n        ctx.strokeStyle = \"lime\";\n        let center = this.getCenter(obj);\n        ctx.beginPath();\n        ctx.arc(center.x, center.y, .8, 0, 2*Math.PI);\n        ctx.stroke();\n        ctx.closePath();\n    }\n\n    drawWall(obj){\n        ctx.strokeStyle =  \"white\";\n        ctx.shadowColor = \"white\";\n        let center = this.getCenter(obj);\n        this.drawBox(center.x, center.y, obj.width, obj.height);\n    }\n\n    drawBlood(obj){\n        ctx.fillStyle = \"rgba(200,100,0,.4)\"\n        ctx.shadowColor = \"red\";\n        let center = this.getCenter(obj);\n        obj.splatter.forEach(sp => {\n            ctx.beginPath();\n            ctx.arc(center.x+1+sp[0], center.y+1+sp[1], sp[2], 0, 2*Math.PI);\n            ctx.closePath();\n            ctx.fill();\n        });\n    }\n\n    drawExplosion(obj) {\n        ctx.fillStyle = \"rgba(200, 200, 10, .4)\";\n        ctx.shadowColor = \"rgba(200, 200, 10, .4)\";;\n        let center = new TwoVector(\n            obj.position.x + this.offset.x,\n            obj.position.y + this.offset.y\n        );\n        ctx.beginPath();\n        ctx.arc(center.x, center.y, obj.radius, 0, 2*Math.PI);\n        ctx.closePath();\n        ctx.fill();\n    }\n\n    drawCircle(x, y, r, ) {\n        ctx.beginPath();\n        ctx.arc(x, y, r, 0, 2*Math.PI);\n        ctx.closePath();\n        ctx.stroke();\n    }\n\n    drawBox(x, y, w, h){\n        ctx.beginPath();\n        ctx.rect(x - (w/2), y - (h/2), w, h);\n        ctx.closePath();\n        ctx.stroke();\n    }\n}\n"],"file":"KombatRenderer.js"}