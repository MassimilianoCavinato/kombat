{"version":3,"sources":["../../src/common/WiggleGameEngine.js"],"names":["WiggleGameEngine","options","physicsEngine","SimplePhysicsEngine","gameEngine","collisions","autoResolve","on","moveAll","bind","Object","assign","foodRadius","headRadius","bodyRadius","eyeDist","eyeRadius","eyeAngle","spaceWidth","spaceHeight","moveDist","foodCount","eatDistance","collideDistance","startBodyLength","aiCount","directionStop","serializer","registerClass","Wiggle","Food","Bullet","x","Math","random","y","TwoVector","stepInfo","isReenact","inputData","playerId","player","world","queryObject","input","position","emit","direction","GameEngine"],"mappings":"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","sourcesContent":["import { GameEngine, SimplePhysicsEngine, TwoVector } from 'lance-gg';\r\nimport Wiggle from './Wiggle';\r\nimport Food from './Food';\r\nimport Bullet from './Bullet';\r\n\r\nexport default class WiggleGameEngine extends GameEngine {\r\n\r\n    constructor(options) {\r\n        super(options);\r\n        this.physicsEngine = new SimplePhysicsEngine({\r\n            gameEngine: this,\r\n            collisions: { autoResolve: false }\r\n        });\r\n        this.on('preStep', this.moveAll.bind(this));\r\n\r\n        // game variables\r\n        Object.assign(this, {\r\n            foodRadius: 0.1, \r\n            headRadius: 0.15, \r\n            bodyRadius: 0.1,\r\n            eyeDist: 0.08, \r\n            eyeRadius: 0.03, \r\n            eyeAngle: 0.5,\r\n            spaceWidth: 16, \r\n            spaceHeight: 9,\r\n             moveDist: 0.06,\r\n            foodCount: 16, \r\n            eatDistance: 0.3, \r\n            collideDistance: 0.3,\r\n            startBodyLength: 10, \r\n            aiCount: 3, \r\n            directionStop: 100\r\n        });\r\n    }\r\n\r\n    registerClasses(serializer) {\r\n        serializer.registerClass(Wiggle);\r\n        serializer.registerClass(Food);\r\n        serializer.registerClass(Bullet);\r\n    }\r\n\r\n    start() {\r\n        super.start();\r\n    }\r\n\r\n    randPos() {\r\n        let x = (Math.random() - 0.5) * this.spaceWidth;\r\n        let y = (Math.random() - 0.5) * this.spaceHeight;\r\n        return new TwoVector(x, y);\r\n    }\r\n\r\n    moveAll(stepInfo) {\r\n        if (stepInfo.isReenact)\r\n            return;\r\n    }\r\n\r\n    processInput(inputData, playerId) {\r\n        super.processInput(inputData, playerId);\r\n        let player = this.world.queryObject({ playerId });\r\n        if (player) {\r\n            if (inputData.input === 'up') {\r\n                player.position.y-=.05;\r\n            }\r\n            else if (inputData.input === 'down') {\r\n                player.position.y+=.05;\r\n            }\r\n            else if (inputData.input === 'right') {\r\n                player.position.x+=.05;\r\n            }\r\n            else if (inputData.input === 'left') {\r\n                player.position.x-=.05;\r\n            }\r\n            else if (inputData.input === 'shoot'){\r\n                this.emit('shoot', player);\r\n            }\r\n            else {\r\n                player.direction = inputData.input;\r\n            }\r\n        }\r\n    }\r\n}"],"file":"WiggleGameEngine.js"}